iPETRO RBIMS - Intelligent Inspection Pipeline
iPETRO RBIMS is a web-based Risk-Based Inspection Management System. It automates the extraction of technical data from engineering PDFs using Google Gemini AI and manages equipment inspection lifecycles.
ğŸš€ Features
Equipment Management: Add, edit, and delete industrial equipment and their component parts.
AI Data Extraction: Upload PDF engineering drawings to automatically extract design pressure, temperature, materials, and fluid data using Google Gemini.
Inspection Logging: Record inspection results, UT readings, and visual findings against specific equipment.
Automated Reporting: Generate and print "Inspection Plan" reports based on historical data.
ğŸ› ï¸ Tech Stack
Frontend: HTML5, Vanilla JavaScript, Tailwind CSS (via CDN)
Backend: Node.js, Express.js
Database: PostgreSQL (pg library)
AI: Google Gemini API (Generative Language)
ğŸ“‚ Project Structure
pdf-ocr-backend/
â”œâ”€â”€ config/
â”‚   â””â”€â”€ db.js           # Database connection pool (PostgreSQL)
â”œâ”€â”€ controllers/
â”‚   â””â”€â”€ apiController.js # All API logic (Equipment, Inspection, Gemini)
â”œâ”€â”€ public/             # Frontend Static Files
â”‚   â”œâ”€â”€ equipment.html  # Equipment Manager UI
â”‚   â”œâ”€â”€ test.html       # Inspection Logging & OCR UI (Main Page)
â”‚   â”œâ”€â”€ inspectionplan.html # History & Reporting UI
â”‚   â””â”€â”€ menu.html       # (Sidebar component, not a full page)
â”œâ”€â”€ routes/
â”‚   â””â”€â”€ api.js          # API Route definitions
â”œâ”€â”€ .env                # Environment Variables (MUST BE CREATED)
â”œâ”€â”€ package.json        # Project dependencies
â””â”€â”€ server.js           # Express Server Entry Point


âš¡ Setup & Installation
Follow these steps to run the project locally.
1. Prerequisites
Node.js (v16 or higher)
PostgreSQL (v13 or higher)
A Google Gemini API Key
2. Install Dependencies
Clone the repository and install the required node modules:
cd pdf-ocr-backend
npm install


3. IMPORTANT: Fix Database Driver
Your package.json incorrectly lists mysql2. Your code requires pg. Run this to fix it:
npm uninstall mysql2
npm install pg


4. Database Setup
Open your PostgreSQL admin tool (like pgAdmin or DBeaver).
Create a new database. You can name it rbims to match the .env file.
Open the query tool for the rbims database.
Copy the entire contents of schema.sql (provided in a separate file) and execute it. This will create all the necessary tables (equipment, inspection, etc.).
5. Configure Environment
Create a file named .env in the pdf-ocr-backend root folder. Copy and paste your configuration, similar to the one you provided:
# Get this from Google AI Studio
GEMINI_API_KEY=your_google_gemini_api_key_goes_here

# PostgreSQL Database Config
DB_HOST=localhost
DB_PORT=5432 ////Optional and boleh ikut korang punya port berapa
DB_USER=postgres
DB_PASSWORD=your_postgres_password // ikut password korang
DB_NAME=rbims

# Server Port
PORT=3000


Note: Your db.js file has a default port of 5433, but the standard for Postgres is 5432. Ensure the DB_PORT value matches your running PostgreSQL instance.
6. Run the Application
Start the backend server:

kalau nak run macam ni  
PS C:/manasimpan/\gemini-ocr-api\pdf-ocr-backend> (run this code) npm start or node server.js
node server.js


You should see a message confirming the server is running and connected to the database:
ğŸ­ RBIMS Backend running at http://localhost:3000
âœ… Connected to PostgreSQL database


ğŸ–¥ï¸ Usage
Once the server is running, you can access the application in your browser:
Inspection Logging (Main Page): http://localhost:3000/
Equipment Manager: http://localhost:3000/equipment.html
Inspection History: http://localhost:3000/inspectionplan.html


ctrl+click kat link atas ni kat terminal then akan redirect to the page terus